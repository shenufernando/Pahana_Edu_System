<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Manage Users - Admin | Pahana Edu</title>
  <link rel="stylesheet" href="../css/style.css" />
  
</head>
<body>

  <!-- Navigation Bar -->
  <header class="navbar">
    <div class="logo">ðŸ“˜ Pahana Edu</div>
    <nav class="nav-links">
      <a href="admin_dashboard.html">Dashboard</a>
      <a href="logout.html">Logout</a>
    </nav>
  </header>

  <!-- Manage Users Section -->
  <section class="billing-container">
    <h2>Manage Users</h2>

    <a href="signup.html" class="btn" style="margin-bottom: 20px; display: inline-block;">âž• Add New User</a>

    <table class="styled-table" id="userTable">
      <thead>
        <tr>
          <th>User ID</th>
          <th>Full Name</th>
          <th>Email Address</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>U001</td>
          <td>Admin Silva</td>
          <td>admin@gmail.com</td>
          <td>Admin</td>
          <td>
            <button class="btn-edit">Edit</button>
            <button class="btn-delete">Delete</button>
          </td>
        </tr>
        <tr>
          <td>U002</td>
          <td>Cashier Nuwan</td>
          <td>cashier@gmail.com</td>
          <td>Cashier</td>
          <td>
            <button class="btn-edit">Edit</button>
            <button class="btn-delete">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Edit Popup -->
  <div class="popup-overlay" id="popupOverlay">
    <div class="popup">
      <h3>Edit User</h3>
      <input type="text" id="editName" placeholder="Full Name">
      <input type="email" id="editEmail" placeholder="Email Address">
      <button onclick="saveEdit()">Save</button>
      <button onclick="closePopup()">Cancel</button>
    </div>
  </div>

  <script>
    const table = document.getElementById("userTable");
    let currentRow = null;

    table.addEventListener("click", function (e) {
      if (e.target.classList.contains("btn-delete")) {
        if (confirm("Are you sure you want to delete this user?")) {
          e.target.closest("tr").remove();
        }
      }

      if (e.target.classList.contains("btn-edit")) {
        currentRow = e.target.closest("tr");
        const name = currentRow.cells[1].textContent;
        const email = currentRow.cells[2].textContent;
        document.getElementById("editName").value = name;
        document.getElementById("editEmail").value = email;
        document.getElementById("popupOverlay").style.display = "flex";
      }
    });

    function closePopup() {
      document.getElementById("popupOverlay").style.display = "none";
    }

    function saveEdit() {
      const newName = document.getElementById("editName").value;
      const newEmail = document.getElementById("editEmail").value;
      if (currentRow) {
        currentRow.cells[1].textContent = newName;
        currentRow.cells[2].textContent = newEmail;
      }
      closePopup();
    }
  </script>

</body>
</html>
